version: "3.7"

services:
  app_proxy:
    environment:
      APP_HOST: deconz_web_1
      APP_PORT: 8080

  web:
    image: deconzcommunity/deconz:2.29.1@sha256:38f23c5a507542bbd6eac0492bf6456be2004015594ca270a1a5998c8a377b74
    user: "1000:1000"
    restart: on-failure
    stop_grace_period: 1m
    ports:
      - 8080:80
      - 443:443
    volumes:
      - ${APP_DATA_DIR}/data:/opt/deCONZ
      - ${APP_DATA_DIR}/otau:/opt/deCONZ/otau
      - /etc/localtime:/etc/localtime:ro
    environment:
      DECONZ_UID: 1000
      DECONZ_GID: 1000
      DECONZ_VNC_MODE: "0"
      DECONZ_VNC_PORT: 5900
      DECONZ_VNC_PASSWORD: ""
      DECONZ_DEVICE: "/dev/ttyUSB0"
      DECONZ_WEB_PORT: 80
      DECONZ_WS_PORT: 443
      DECONZ_DEBUG_INFO: "1"
      DECONZ_DEBUG_APS: "0"
      DECONZ_DEBUG_ZCL: "0"
      DECONZ_DEBUG_DDF: "0"
      DECONZ_DEBUG_DEV: "0"
      DECONZ_DEBUG_ZDP: "0"
      DECONZ_DEBUG_OTA: "0"
      DECONZ_DEBUG_ERROR: "0"
      DECONZ_DEBUG_HTTP: "0"
      DECONZ_DEV_TEST_MANAGED: "0"
